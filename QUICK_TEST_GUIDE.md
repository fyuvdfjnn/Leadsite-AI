# 元素修改功能 - 快速测试指南

## 🚀 快速开始

1. **启动开发服务器**
```bash
cd my-app
npm run dev
```

2. **打开浏览器**
访问 `http://localhost:3000`

3. **生成一个网站**
在输入框输入："Create a professional website"，等待生成完成

4. **选择元素**
- 点击右下角的 🖱️ (MousePointer2) 按钮
- 鼠标移到预览区域的任意元素上（会高亮显示）
- 点击要修改的元素
- 元素标签会显示在输入框上方

5. **输入修改指令**
试试这些指令：

## 📝 测试指令列表

### ✅ 颜色修改
```
改为红色
文字变蓝色
背景改为黄色
背景变绿色
改为紫色
```

**支持的颜色**:
- 红/red, 蓝/blue, 绿/green, 黄/yellow
- 紫/purple, 橙/orange, 粉/pink
- 白/white, 黑/black, 灰/gray

### ✅ 字体样式
```
字体变大
字体变小
加粗
字体变细
```

### ✅ 对齐方式
```
居中
左对齐
右对齐
```

### ✅ 视觉效果
```
添加圆角
添加阴影
添加边框
添加红色边框
```

### ✅ 布局
```
增加内边距
减少内边距
宽度100%
宽度50%
```

### ✅ 显示控制
```
隐藏
显示
半透明
```

### ✅ 通用美化
```
让它更漂亮
美化这个元素
突出显示
让它更显眼
```

## 🎯 推荐测试流程

### 测试 1: 修改标题颜色
1. 选择页面标题（通常是大字的 h1）
2. 输入："改为蓝色"
3. 按回车
4. 观察标题变成蓝色

### 测试 2: 美化按钮
1. 选择一个按钮
2. 输入："背景改为红色"
3. 按回车
4. 观察按钮背景变红，文字变白

### 测试 3: 调整文字样式
1. 选择一段文字
2. 输入："加粗"
3. 按回车
4. 输入："字体变大"（选择另一个元素）
5. 观察效果

### 测试 4: 添加视觉效果
1. 选择一个卡片或容器
2. 输入："添加阴影"
3. 按回车
4. 再次选择同一元素
5. 输入："添加圆角"
6. 观察效果叠加

### 测试 5: 通用美化
1. 选择任意元素
2. 输入："让它更漂亮"
3. 观察自动应用圆角、阴影和内边距

## 🐛 故障排除

### 问题 1: "无法理解该指令"
**原因**: 指令关键词不匹配
**解决**: 
- 使用上面列出的测试指令
- 确保指令包含关键词（如"红色"、"大"、"加粗"等）

### 问题 2: 选择不到元素
**原因**: Select Element 模式未开启
**解决**: 
- 确保点击了 🖱️ 按钮（按钮会变蓝色）
- 确保在预览区域内点击

### 问题 3: 修改没有生效
**原因**: 可能被其他样式覆盖
**解决**: 
- 检查浏览器控制台的 Network 标签，确认 API 调用成功
- 使用浏览器开发者工具检查元素的 inline styles

### 问题 4: API 返回 404
**原因**: API 路由未正确创建
**解决**: 
- 确认 `app/api/modify-element/route.ts` 文件存在
- 重启开发服务器
- 清除 `.next` 缓存：`rm -rf .next`（Windows: `rmdir /s .next`）

## 💡 高级技巧

### 组合修改
虽然当前不支持一次输入多个指令，但可以连续修改同一元素：

1. 选择元素 → "改为蓝色" → 回车
2. 选择元素 → "加粗" → 回车
3. 选择元素 → "添加阴影" → 回车

### 快速重置
如果修改不满意，刷新页面恢复原始状态。

### 查看应用的样式
打开浏览器开发者工具（F12）:
1. 选择 Elements 标签
2. 找到修改的元素
3. 查看 `style=""` 属性中的 inline styles

## 📊 预期结果示例

### 成功响应
```json
{
  "success": true,
  "styles": {
    "color": "rgb(239, 68, 68)",
    "fontWeight": "bold"
  },
  "description": "文字改为红色，加粗"
}
```

### 失败响应
```json
{
  "success": false,
  "error": "无法理解指令..."
}
```

## 🔧 调试模式

### 启用详细日志
在浏览器控制台输入：
```javascript
localStorage.setItem('debug', 'true')
```

### 查看元素信息
选择元素后，在控制台查看：
```javascript
// 在 visual-editor.tsx 中已经有 console.log
// 会输出: [SelectElement] Selected: { element, selector, ... }
```

## ✅ 验收标准

功能正常工作的标志：
- ✅ 能选择预览区域的元素
- ✅ 元素标签显示在输入框上方
- ✅ 输入指令后能看到 AI 处理动画
- ✅ 元素样式实时更新
- ✅ 聊天记录显示修改结果
- ✅ 可以连续修改多个元素

## 🎓 扩展测试

### 边界情况
1. 修改已经隐藏的元素
2. 修改非常小的元素（如图标）
3. 修改固定定位的元素（如 header）
4. 快速连续修改同一元素

### 不同元素类型
- 文本段落 (p, span, div)
- 标题 (h1-h6)
- 按钮 (button)
- 链接 (a)
- 图片容器 (img 父元素)
- 列表项 (li)

## 🚀 下一步

测试完成后，可以：
1. 集成真实 AI API（参考 `ELEMENT_MODIFY_GUIDE.md`）
2. 添加更多自定义指令
3. 实现撤销/重做功能
4. 添加样式持久化

## 📞 需要帮助？

如果遇到问题：
1. 检查浏览器控制台错误
2. 查看 Network 标签的 API 请求
3. 确认开发服务器运行正常
4. 查看 `ELEMENT_MODIFY_GUIDE.md` 获取详细信息

